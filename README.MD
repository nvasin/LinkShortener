## Основные возможности

1. **Создание коротких ссылок**:
   - Анонимные пользователи могут создавать ссылки без пользовательского алиаса.
   - Авторизованные пользователи могут использовать пользовательские алиасы.

2. **Управление ссылками**:
   - Авторизованные пользователи могут обновлять и удалять только свои ссылки.

3. **Просмотр статистики**:
   - Доступна только для авторизованных пользователей и только для их ссылок.

4. **Редирект по коротким ссылкам**:
   - Любой пользователь может перейти по короткой ссылке.

5. **Кэширование**:
   - Используется Redis для ускорения редиректов.

6. **Очистка неиспользуемых сыылок**
   - Автоматическое удаление, если ссылка не была активна больше 14 дней.

## Структура проекта
**api/** # Маршруты и схемы API  
**crud/** # CRUD-операции для работы с базой данных   
**database/** # Модели и подключение к базе данных   
**redis/** # Подключение к Redis   
**services/** # Логика сокращения ссылок   
**main.py** # Точка входа в приложение   
  
**.env** # Переменные окружения   
**Dockerfile** # Dockerfile для сборки приложения   
**docker-compose.yaml** # Конфигурация Docker Compose   
**requirements.txt** # Зависимости Python   
**entrypoint.sh** # Скрипт для инициализации базы данных  

---

## Инструкция по запуску

#### 1. Клонирование репозитория

Склонируйте проект на ваш сервер или локальную машину:

```bash
git clone <URL_репозитория>
cd ShortLinks
```

#### 2. Настройка переменных окружения
Создайте файл .env в корне проекта (если его нет) и настройте переменные окружения:
```bash
# База данных
DB_HOST=postgres
DB_PORT=5432
DB_NAME=shortener
DB_USER=user
DB_PASSWORD=password

# Redis
REDIS_HOST=redis
REDIS_PORT=6379

# Приложение
BASE_URL=http://localhost:8000
```

#### 3. Сборка и запуск контейнеров
Убедитесь, что у вас установлен Docker и Docker Compose. Затем выполните команду:
```bash
docker-compose up --build
```

#### 4. Проверка работы
После запуска приложение будет доступно по адресу: http://localhost:8000.

---
### Основные маршруты API
#### 1. Аутентификация
- Регистрация: POST /auth/register
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

- Логин: POST /auth/login
```json
{
  "email": "user@example.com",
  "password": "password123"
}
```

#### 2. Работа со ссылками
- Создание короткой ссылки: POST /links/shorten
```json
{
  "original_url": "https://example.com",
  "custom_alias": "example"  // Только для авторизованных пользователей
}
```

- Получение статистики по ссылке: GET /links/{short_code}/stats

- Обновление ссылки: PUT /links/{short_code}
```json
{
  "original_url": "https://new-example.com",
  "expires_at": "2025-12-31T23:59:59"
}
```

- Удаление ссылки: DELETE /links/{short_code}

- Поиск ссылок: GET /links/search?original_url=https://example.com

- Получение всех ссылок пользователя: GET /links/my

#### 3. Редирект
- Переход по короткой ссылке: GET /{short_code}

---
#### Полезные команды
- Остановка контейнеров
```bash
docker-compose down
```
- Пересборка контейнеров
```bash
docker-compose up --build
```
- Просмотр логов
```bash
docker-compose logs -f
```
- Проверка состояния контейнеров
```bash
docker-compose ps
```
---
### Примечания
- Миграции базы данных:
Миграции выполняются автоматически при запуске контейнера через скрипт entrypoint.sh.
- Кэширование: 
Redis используется для кэширования редиректов, чтобы ускорить обработку запросов.